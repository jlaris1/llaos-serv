extends ../../layouts/layout.jade
block contenido
    script.
        $(document).ready( function(){
            $('[data-toggle="tooltip"]').tooltip();
            $('#subMenuCompras').removeClass('hidden');
            $('#spanMenuCompras').removeClass('fa-angle-left');
            $('#spanMenuCompras').addClass('fa-angle-down');
            $('#subMenuOrdenes').removeClass('hidden');
            $('#spanMenuOrdenes').removeClass('fa-angle-left');
            $('#spanMenuOrdenes').addClass('fa-angle-down');
            $('#subMenuOrdenesRuta').removeClass('hidden');
            $('#spanMenuOrdenesRuta').removeClass('fa-angle-left');
            $('#spanMenuOrdenesRuta').addClass('fa-angle-down'); 

            $('#orders').dataTable({
                "order": [[ 0, "desc" ]]
            });
        });

    // Inputs mandejo
    label#url.hidden #{url}

    // Título
    section.mb-4
        .card
            .card-body.d-flex.justify-content-between
                h4.h4-responsive.mt-3
                    i.fas.fa-truck-loading
                    |   Órdenes en ruta
                div
                    a(href="/ordenes/enruta" style="margin-right: 5px;").btn.btn-success
                        i(style="color: white;" data-toggle="tooltip", data-placement="top", title="Nueva orden en ruta").fas.fa-plus-circle
                    a(href="#reports" disabled="true" data-toggle="modal" data-target="#reports").btn.btn-danger
                        i(style="color: white;" data-toggle="tooltip", data-placement="top", title="Reportes").fas.fa-file-pdf

    // Tabla - contenido
    section.mb-4
        .card
            .table-responsive(style="margin-top: 10px;")
                table#orders.table.table-striped.table-hover
                    thead.table-head
                        th.text-center
                            i(style="color: gray;").fas.fa-cog
                        th # Folio
                        th Unidad
                        th Chofer
                        th Estatus
                        th Fecha
                    tbody
                        each ord in ordersRuta
                            tr
                                td
                                    .d-flex
                                        a(href="/ordenes/ordenruta/ver/#{ord.id}", data-toggle="tooltip", data-placement="top", title="Ver detalles", style="margin-right: 5px; color: #FFF;").btn.btn-primary.btn-small
                                            i.fas.fa-eye.fa-2x
                                        - var disabled = false;
                                        - if(ord.estatus == "En Inventario") { disabled = true; }
                                        a#status(class=disabled ? 'disabled':'' href="/ordenes/ordenruta/entrada/#{ord.id}", data-toggle="tooltip", data-placement="top", title="Entrada  Inventarios", style="margin-right: 5px;" disabled=disabled).btn.btn-success.btn-small
                                            i.fas.fa-sign-in-alt.fa-2x
                                        - var disabled = true;
                                        - if(ord.estatus == "En Inventario") { disabled = false; }
                                        a#cerrar(class=disabled ? 'disabled':'' href="/ordenes/orden/ordenruta/#{ord.id}}", data-toggle="tooltip", data-placement="top", title="Cerrar orden" disabled=disabled).btn.btn-danger.btn-small
                                            i.fas.fa-lock.fa-2x                                            
                                td.text-center ORD#{ord.codigo}
                                td.text-center #{ord.unidad.marca} - #{ord.unidad.modelo}
                                td.text-center #{ord.chofer.nombre}
                                td
                                    if ord.estatus == "Nueva"
                                        label.label.label-primary &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{ord.estatus}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    else if ord.estatus == "Generada"
                                        label.label.label-success &nbsp;&nbsp;&nbsp;&nbsp; #{ord.estatus} &nbsp;&nbsp;&nbsp;&nbsp;
                                    else if ord.estatus == "Cancelada" 
                                        label.label.label-danger &nbsp;&nbsp;&nbsp;&nbsp;#{ord.estatus}&nbsp;&nbsp;&nbsp;&nbsp;
                                    else if ord.estatus == "Enviada"
                                        label.label.label-warning &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #{ord.estatus} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    else if ord.estatus == "En Ruta"
                                        label.label(style="background-color: #ffa500;") &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #{ord.estatus} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    else if ord.estatus == "Cerrada"
                                        label.label.label-close &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  #{ord.estatus}  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                                    else if ord.estatus == "En Inventario"
                                        label.label.label-inventory &nbsp;  #{ord.estatus}  &nbsp;
                                    if (new Date(ord.fecha).getMonth() + 1) < 10
                                        if (new Date(ord.fecha).getDate()) < 10
                                            td.text-center #{ '0' + new Date(ord.fecha).getDate()+ '/0' + (new Date(ord.fecha).getMonth() + 1)+ '/' + new Date(ord.fecha).getFullYear()}
                                        else         
                                            td.text-center #{ new Date(ord.fecha).getDate()+ '/0' + (new Date(ord.fecha).getMonth() + 1)+ '/' + new Date(ord.fecha).getFullYear()}
                                    else
                                        if (new Date(ord.fecha).getDate()) < 10
                                            td.text-center #{ '0' + new Date(ord.fecha).getDate()+ '/' + (new Date(ord.fecha).getMonth() + 1)+ '/' + new Date(ord.fecha).getFullYear()}
                                        else 
                                            td.text-center #{ new Date(ord.fecha).getDate()+ '/' + (new Date(ord.fecha).getMonth() + 1)+ '/' + new Date(ord.fecha).getFullYear()}
                                    